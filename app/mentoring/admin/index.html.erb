<% attributes = entity_class.attributes.sort_by(&:display_order).reject { |a| a[:display] == false } %>
<div class="d-flex justify-content-between align-items-center mb-3"> 
  <div class="d-flex justify-content-start align-items-center">
    <%= link_to '/admin', icon('arrow-left', 'Back'), escape: false, class: 'btn btn-link btn-sm' %>
    <h1 style="font-size: 1.5em" class="mb-0 text-muted"><%= titlecase controller_name %></h1>
  </div>
  <%= link_to "/admin/#{controller_name}/new", icon('plus', "Add #{titlecase entity_class.canonical_name}"), escape: false, class: 'btn btn-sm btn-primary' %>
</div>
<table class="table table-striped table-sm" style="font-size: 0.9em">
  <thead>
    <% attributes.each do |attr| %>
      <th scope="col"><%= attr.display_name %></th>
    <% end %>
    <th scope="col"></th>
  </thead>
  <tbody>
    <% entity_repository.each do |entity| %>
      <tr>
	<% attributes.each do |attr| %>
	  <td><%= entity.send(attr.name) %></td>
	<% end %>
	<td>
	  <%= link_to "/admin/#{controller_name}/#{entity.id}", 'View', class: "btn btn-link btn-sm" %>
	  <%= link_to "/admin/#{controller_name}/#{entity.id}/edit", 'Edit', class: "btn btn-link btn-sm" %>
	</td>
      </tr>
    <% end %>
  </tbody>
</table>
